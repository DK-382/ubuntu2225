function table2str(tab)
    local str=""
    for i=1,#tab,1 do
        if(i==#tab) then
             str=str..tostring(tab[i])
        else
            str=str..tostring(tab[i])..","
        end
    end
    return  str
end

function joint2pose(jointList,V_P)
    local joint_str,pos_str,ori_str,pos,ori=""
  --  local jointList=change(jointLists)
    pos,ori=base_to_user(jointList)
    joint_str=table2str(jointList)
    print(joint_str)
    pos_str=table2str(pos)
    print(pos_str)
    ori_str=table2str(ori)
    print(ori_str)
    set_global_variable(V_P,pos_str..","..ori_str..","..joint_str)
    print(pos_str..","..ori_str..","..joint_str)
end

function change(List)
    local tab={0,0,0,0,0,0}
    for i=1,#tab,1 do
        tab[i]=r2d(List[i])
    end
    return  tab
end
    

set_joint_maxvelc({1,1,1,1,1,1})
set_joint_maxacc({1,1,1,1,1,1})
set_end_maxvelc(1)
set_end_maxacc(1)
script_common_interface("AuboVision","rvisionModel|Test.")
script_common_interface("AuboVision", "rclosevision|")
resp_from_camera=nil
while (resp_from_camera ~= 1) do
    sleep(0.05)
    resp_from_camera = script_common_interface("AuboVision", "getrvision_status|")
    print("resp_from_camera :"..tostring(resp_from_camera))
    if (resp_from_camera == 0) then
        popup_message(2, "Excessice Deviation", true)
        break
    end
    if (resp_from_camera == -1) then
        popup_message(2, "Verification Fail", true)
        break
    end
    if (resp_from_camera == -2) then
        popup_message(2, "Verification Stop", true)
        break
    end
end
sleep(0.05)
joint2pose(script_common_interface("AuboVision", "rposechange|-0.0638731,0.606643,0.347573,-3.13956,0.0278725,3.12523"),"V_P_test1")
joint2pose(script_common_interface("AuboVision", "rposechange|-0.0638735,0.606642,0.215056,-3.13955,0.0278685,3.12523"),"V_P_test2")
--[[
move_joint(script_common_interface("AuboVision", "rposechange|-0.0638731,0.606643,0.347573,-3.13956,0.0278725,3.12523"), true)
move_joint(script_common_interface("AuboVision", "rposechange|-0.0638735,0.606642,0.215056,-3.13955,0.0278685,3.12523"), true)
move_joint(script_common_interface("AuboVision", "rposechange|-0.0638711,0.606637,0.347593,-3.13957,0.0278811,3.12523"), true)
]]
